# ==Linux文件系统==

## 一、文件系统解读

在Linux下运行”df-h"命令，可以查看到目前Linux中存在的硬盘分区情况，及每个分区的硬盘使用情况。

<img src="https://gitee.com/ymq_typroa/typroa/raw/main/image-20230912110155195.png" alt="image-20230912110155195" style="zoom:200%;" />

上述命令的结果中可以看到，Filesystem列表示文件系统，Size表示硬盘的大小，used表示已经使用了多大，Avail表示利余便用量Use%表示占用百分比，Mounted on表示目前挂载到哪个目录下。

另外，对上述几个挂载的目录进行一下简单的说明。

(1)/dev:dev是设备(device)的英文缩写。/dev这个目录对所有的用户都十分重要。因为在这个目录中包含了所有Linux系统中使用的外部设备。

(2)/dev/shm: /dev/shm/是linux下一个非常有用的目录，因为这个目录不在硬盘上，而是在内存里。因此在linux下，就不需要大费折去建ramdisk，直接使用/dev/shm/就可达到很好的优化效果，该分区的大小通常是系统内存的一半大小，由于该目录是驻留在内存中，所以对于在系统中需要使用的临时数据，可以将其存储在该目录中，就相当于我们直接在使用内存读写文件，速度相当快。(基本上来说，内存的读写速度可以达到硬盘的100倍左右)。

![image-20230912111449901](https://gitee.com/ymq_typroa/typroa/raw/main/image-20230912111449901.png)

cp命令式用来赋复制拷贝文件的，free可以查看目前文件系统的使用情况

> 内存除了快以外，还有一个特性，断电数据全部丢失

![image-20230912111646641](https://gitee.com/ymq_typroa/typroa/raw/main/image-20230912111646641.png)

现在重启了一下会发现，之前搞得文件确实都没有了

(3) /run:一些运行过程中跟用户或进程有关的数据，属于内核级文件

(4) /sys/fs/cgroup: 关于运行过程中CPU、内存等数据，属于内核级文件。

(5)/:根目录，用户可以使用的保存操作系统其他文件的目录，用户也可以创建自己的目录

(6) /boot: 操作系统的内核及在引导过程中使用的文件。

(7) /home: 普通用户使用的根目录，通常也称之为“家目录”，类似于Windows下的 C:Users 目录

(8) /run/user/0: 编号ID为0的用户(通常是指root) 在运行过程中产生的数据

![image-20230912112349560](https://gitee.com/ymq_typroa/typroa/raw/main/image-20230912112349560.png)

另外，在linux中，文件系统通常由以下类型构成，其特点总结如下:

| 文件系统 | 最大文件名长度 | 最大文件大小 | 最大分区大小 |
| -------- | -------------- | ------------ | ------------ |
| ext2     | 255bytes       | 2TB          | 16TB         |
| ext3     | 255bytes       | 2TB          | 16TB         |
| ext4     | 255bytes       | 16TB         | 1EB          |
| XFS      | 255bytes       | 8EB          | 8EB          |

> 1TB = 1024GB  1PB = 1024TB  1EB = 1024PB，目前还没有单个存储器可以达到EB这个容量级别

## 二、Linux根目录说明

| 命令实例       | 作用                                                         |
| -------------- | ------------------------------------------------------------ |
| /              | 表示根目录，是绝对路径                                       |
| ./             | 表示当前目录，是相对路径                                     |
| ../            | 表示上一级目录，是相对路径                                   |
| /root          | root用户的主目录                                             |
| /home/username | 存放普通用户的个人配置文件                                   |
| /bin           | 存放linux常用的命令                                          |
| /boot          | 存放系统启动时要用到的文件                                   |
| /dev           | 存放linux系统中使用的外部设备                                |
| /etc           | 存放系统管理时用到的配置文件和子目录                         |
| /usr/sbin      | 存放管理员的系统管理程序                                     |
| /lib           | 存放系统动态链接共享库，通常后缀名是.so，类似于Windows下的.dll |
| /lost+found    | 系统运行异常时产生的错误，会将遗失的片断放在这里             |
| /mnt           | 可临时将别的外部设备挂接在此目录下                           |
| /proc          | 存在系统内存中的信息                                         |
| /usr           | 用户的应用程序和文件都存放在这个目录下                       |
| /tmp           | 存放临时文件的目录                                           |
| /opt           | Optinoal,可选目录，默认是空的，交由用户使用                  |

通常情况下，我们可以使用/opt和/home目录，这两个目录均是由用户自由处理的，不存在敏感文件，也可以将 程序 安装在/opt/目录下，默认情况下爱，程序安装路径会在 /usr/bin 或 /var/目录下

## 三、常见命令使用

1. ###  `top` 命令

类似于windows的任务管理器，可以查看cpu和内存等使用情况，也可以查看每个进程消耗CPU和内存，及进程ID等信息。 

![image-20230912123837215](https://gitee.com/ymq_typroa/typroa/raw/main/image-20230912123837215.png)

top命令是全屏输出结果，如果要退出该命令，可以按 Q 或 Ctrl+C

### 2.其他命令

| 命令               | 作用                                               |
| ------------------ | -------------------------------------------------- |
| cd ../ 或 cd ..    | 切换到上一层目录 (相对目录)                        |
| cd 目录名          | 切换到对应目录(绝对目录，从/根目录开始)            |
| pwd                | 查看当前所在目录                                   |
| du -sh             | 查看文件或文件夹的大小                             |
| fdisk -I           | 查看磁盘分区列表                                   |
| free               | 查看内存使用情况                                   |
| cat 文件名         | 肯看文本文件内容，如 cat /etc/passwd可查看用户信息 |
| cat /proc/memminfo | 查看内存信息                                       |
| cat /proc/cpuinfo  | 查看CPU信息                                        |

## 四、Linux的启动级别

| 命令实例         | 作用                                                     |
| ---------------- | -------------------------------------------------------- |
| 文件/etc/inittab | 设置默认启动级别                                         |
| 0                | 代表halt，关机操作，这个0不能设置，否则机器将不能启动    |
| 1                | 代表单用户模式，采用这个设置，系统只能允许一个用户登     |
| 2                | 代表多用户模式，但不支持网络工作                         |
| 3                | 代表命令行界面，即文本界面，是企业中服务器通用的启动模式 |
| 4                | 系统预留，该级别目前还没有使用                           |
| 5                | 代表图形界面，也是Linux系统启动时带GUI的默认启动模式     |
| 6                | 代表重启模式，这个6也不能设置，否则系统反复重启          |

init 0也可以代替关机程序

## 五、Linux的关机与重启

| 命令实例          | 作用              |
| ----------------- | ----------------- |
| reboot            | 重启              |
| shutdown -r now   | 现在立刻重启      |
| shutdown -r 11:30 | 等到11:30进行重启 |
| shutdown -r +1    | 等1分钟后重启     |
| halt              | 关机              |
| shutdown -h now   | 现在立刻关闭系统  |
| shutdown -h 11:30 | 等到11:30关闭系统 |
| init 0            | 关机              |
| init 6            | 重启              |

